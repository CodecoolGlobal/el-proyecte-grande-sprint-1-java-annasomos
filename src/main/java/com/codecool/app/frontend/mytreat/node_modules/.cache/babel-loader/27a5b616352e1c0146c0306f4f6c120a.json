{"ast":null,"code":"import _toConsumableArray from\"/Users/annasomos/Desktop/Advanced/el-proyecte-grande-sprint-1-java-annasomos/src/main/java/com/codecool/app/frontend/mytreat/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/annasomos/Desktop/Advanced/el-proyecte-grande-sprint-1-java-annasomos/src/main/java/com/codecool/app/frontend/mytreat/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/annasomos/Desktop/Advanced/el-proyecte-grande-sprint-1-java-annasomos/src/main/java/com/codecool/app/frontend/mytreat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/annasomos/Desktop/Advanced/el-proyecte-grande-sprint-1-java-annasomos/src/main/java/com/codecool/app/frontend/mytreat/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import api from\"./api/api\";import{useNavigate}from\"react-router-dom\";import{useState}from\"react\";import{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Registration=function Registration(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var navigate=useNavigate();useEffect(function(){var fetchUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get(\"/users\");case 3:response=_context.sent;setUsers(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(_context.t0.response){console.log(_context.t0.response.data);console.log(_context.t0.response.status);console.log(_context.t0.response.headers);}else{console.log(\"Error: \".concat(_context.t0.message));}case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchUsers(){return _ref.apply(this,arguments);};}();fetchUsers();},[]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var id,newUser,response,allUsers;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();id=users.length?users[users.length-1].id+1:1;newUser={id:id,name:name,email:email,password:password};_context2.prev=3;_context2.next=6;return api.post(\"/users\",newUser);case 6:response=_context2.sent;allUsers=[].concat(_toConsumableArray(users),[response.data]);setUsers(allUsers);setName(\"\");setEmail(\"\");setPassword(\"\");navigate(\"/\");_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](3);console.log(\"Error: \".concat(_context2.t0.message));case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[3,15]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add new user\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"name\",type:\"text\",required:true,value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"text\",required:true,value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",required:true,value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]})]});};export default Registration;","map":{"version":3,"names":["React","api","useNavigate","useState","useEffect","Registration","users","setUsers","name","setName","email","setEmail","password","setPassword","navigate","fetchUsers","get","response","data","console","log","status","headers","message","handleSubmit","e","preventDefault","id","length","newUser","post","allUsers","target","value"],"sources":["/Users/annasomos/Desktop/Advanced/el-proyecte-grande-sprint-1-java-annasomos/src/main/java/com/codecool/app/frontend/mytreat/src/Registration.js"],"sourcesContent":["import React from \"react\";\nimport api from \"./api/api\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\n\nconst Registration = () => {\n  const [users, setUsers] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const response = await api.get(\"/users\");\n        setUsers(response.data);\n      } catch (err) {\n        if (err.response) {\n          console.log(err.response.data);\n          console.log(err.response.status);\n          console.log(err.response.headers);\n        } else {\n          console.log(`Error: ${err.message}`);\n        }\n      }\n    };\n\n    fetchUsers();\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const id = users.length ? users[users.length - 1].id + 1 : 1;\n    const newUser = {\n      id,\n      name: name,\n      email: email,\n      password: password,\n    };\n    try {\n      const response = await api.post(\"/users\", newUser);\n      const allUsers = [...users, response.data];\n      setUsers(allUsers);\n      setName(\"\");\n      setEmail(\"\");\n      setPassword(\"\");\n      navigate(\"/\");\n    } catch (err) {\n      console.log(`Error: ${err.message}`);\n    }\n  };\n  return (\n    <>\n      <h2>Add new user</h2>\n      <form onSubmit={handleSubmit}>\n        <label htmlFor=\"name\">Name:</label>\n        <input\n          id=\"name\"\n          type=\"text\"\n          required\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n        />\n        <label htmlFor=\"email\">Email:</label>\n        <input\n          id=\"email\"\n          type=\"text\"\n          required\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <label htmlFor=\"password\">Password:</label>\n        <input\n          id=\"password\"\n          type=\"password\"\n          required\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button type=\"submit\">Submit</button>\n      </form>\n    </>\n  );\n};\n\nexport default Registration;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}